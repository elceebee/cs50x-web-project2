<!DOCTYPE html>
<head>
    <title>El's Flack</title>
    <!--<script 
        type="text/javascript" 
        src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js">
    </script>-->
    <script>
        document.addEventListener('DOMContentLoaded', () => {    
            // First-time visit to Flack
            if (!localStorage.getItem('displayname')) { 

                // By default the submit button is disabled
                document.querySelector('#choosedisplay').disabled = true;
                
                // Enable button only if there is text in the input field
                document.querySelector('#displayname').onkeyup = () => {
                    if (document.querySelector('#displayname').value.length < 2) {
                        document.querySelector('#choosedisplay').disabled = true;
                    }
                    else {
                        document.querySelector('#choosedisplay').disabled = false;
                    }
                };  

                // When user submits a display name, it's stored in local storage
                document.querySelector('#chooseform').onsubmit = () => {
                    
                    // Sets display name for browser
                    const displayname = document.querySelector('#displayname').value;
                    
                    // Stores displayname in local storage    
                    localStorage.setItem('displayname', displayname);
                };
            }
            else {
                document.getElementById('choose').style.display = "none";
            }
        });    
        // User has been here before

        // Removes box for entering display name
        

        // Connect to websocket
        // var socket = io.connect(location.protocol + '//' + document.domain + ':' + location.port);

        // Display last channel and chosen display name
    </script>

</head>
<body>
    <h1>Welcome to Flack!</h1>
    <div id="choose">
        <form id="chooseform">
            <input id="displayname" type="text" placeholder="Choose a username" required>
            <button id="choosedisplay">Submit</button>
        </form>
    </div>
</body>